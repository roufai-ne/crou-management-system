# FICHIER: apps\api\.env.example
# Configuration des variables d'environnement pour API CROU
# 
# DESCRIPTION:
# Variables d'environnement pour configuration sécurisée
# Base de données PostgreSQL multi-tenant
# JWT et sécurité API
# Configuration par environnement (dev/prod)
#
# UTILISATION:
# Copier vers .env et modifier les valeurs selon environnement
# 
# AUTEUR: Équipe CROU
# DATE: Décembre 2024

# ========================================
# CONFIGURATION GÉNÉRALE
# ========================================
NODE_ENV=development
PORT=3001
API_VERSION=1.0.0

# ========================================
# BASE DE DONNÉES POSTGRESQL
# ========================================
# Option 1: URL complète (recommandé)
DATABASE_URL=postgresql://crou_user:crou_password@localhost:5432/crou_database

# Option 2: Variables séparées (alternative)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=crou_database
DB_USER=crou_user
DB_PASSWORD=crou_password

# ========================================
# SÉCURITÉ JWT
# ========================================
# CRITIQUE: Ces secrets DOIVENT être changés et avoir au moins 32 caractères
# Pour générer des secrets sécurisés, utilisez:
#   node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
#
# Exemples de secrets forts (NE PAS utiliser ces valeurs en production):
JWT_SECRET=a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6q7r8s9t0u1v2w3x4y5z6a7b8c9d0e1f2
JWT_EXPIRES_IN=15m
JWT_REFRESH_SECRET=f2e1d0c9b8a7z6y5x4w3v2u1t0s9r8q7p6o5n4m3l2k1j0i9h8g7f6e5d4c3b2a1
JWT_REFRESH_EXPIRES_IN=7d

# ========================================
# REDIS (Cache et sessions)
# ========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# ========================================
# SÉCURITÉ API
# ========================================
# Domaines autorisés CORS (séparés par virgules)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173

# Rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
AUTH_RATE_LIMIT_MAX=5

# ========================================
# LOGGING
# ========================================
LOG_LEVEL=info
LOG_FILE_PATH=./logs/api.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=5

# ========================================
# UPLOADS ET FICHIERS
# ========================================
UPLOAD_MAX_SIZE=10485760
UPLOAD_PATH=./uploads
ALLOWED_FILE_TYPES=.pdf,.xlsx,.csv,.jpg,.png

# ========================================
# EMAIL (notifications)
# ========================================
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_SECURE=false
EMAIL_USER=noreply@crou.gov.ne
EMAIL_PASSWORD=
EMAIL_FROM_NAME=Système CROU

# ========================================
# URLS ET DOMAINES
# ========================================
FRONTEND_URL=http://localhost:3000
API_BASE_URL=http://localhost:3001

# ========================================
# CONFIGURATION PRODUCTION
# ========================================
# SSL/TLS en production
DB_SSL=false
DB_SSL_REJECT_UNAUTHORIZED=false

# Clustering (pm2)
PM2_INSTANCES=max
PM2_EXEC_MODE=cluster

# Monitoring
SENTRY_DSN=
HEALTH_CHECK_PORT=3002

# ========================================
# DÉVELOPPEMENT UNIQUEMENT
# ========================================
# Activer les seeds automatiques
AUTO_RUN_SEEDS=true

# Logs de debug SQL
SQL_LOGGING=true

# Mode synchronize TypeORM (JAMAIS en production)
DB_SYNCHRONIZE=true

# ========================================
# VARIABLES SPÉCIFIQUES CROU
# ========================================
# Configuration multi-tenant
DEFAULT_TENANT=crou_niamey
MINISTERE_TENANT=ministere

# Configuration rapports
REPORTS_PATH=./reports
REPORTS_TEMP_PATH=./temp/reports

# Backup base de données
BACKUP_PATH=./backups
BACKUP_RETENTION_DAYS=30

# ========================================
# EXEMPLE VARIABLES PRODUCTION
# ========================================
# NODE_ENV=production
# DATABASE_URL=postgresql://user:password@prod-db.example.com:5432/crou_prod
# JWT_SECRET=super-secure-random-key-256-bits
# ALLOWED_ORIGINS=https://crou.gov.ne,https://www.crou.gov.ne
# DB_SSL=true
# SQL_LOGGING=false
# AUTO_RUN_SEEDS=false
# DB_SYNCHRONIZE=false