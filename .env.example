# ================================================================================================
# CONFIGURATION ENVIRONNEMENT - SYSTÈME CROU
# ================================================================================================
# Copier ce fichier en .env et remplir les valeurs appropriées
# ATTENTION: Ne jamais committer le fichier .env contenant des secrets réels

# ================================================================================================
# ENVIRONNEMENT
# ================================================================================================
NODE_ENV=development # development | staging | production
API_VERSION=1.0.0

# ================================================================================================
# SERVEUR API
# ================================================================================================
PORT=3001
API_URL=http://localhost:3001

# ================================================================================================
# BASE DE DONNÉES POSTGRESQL
# ================================================================================================
# IMPORTANT: Ces variables DOIVENT être définies (pas de valeurs par défaut)
DB_HOST=localhost
DB_PORT=5432
DB_USER=crou_user
DB_PASSWORD=votre_mot_de_passe_securise_ici
DB_NAME=crou_database

# URL complète de la base de données (alternative)
DATABASE_URL=postgresql://crou_user:votre_mot_de_passe@localhost:5432/crou_database

# ================================================================================================
# JWT ET AUTHENTIFICATION
# ================================================================================================
# CRITIQUE: Ces secrets DOIVENT être différents et d'au moins 32 caractères
# Générer avec: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET=votre_secret_jwt_de_64_caracteres_minimum_genere_aleatoirement
JWT_REFRESH_SECRET=votre_secret_refresh_jwt_different_de_64_caracteres_minimum

# Durées d'expiration (format: 15m, 1h, 7d, etc.)
JWT_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# ================================================================================================
# SÉCURITÉ - CONFIGURATION VERROUILLAGE DE COMPTE
# ================================================================================================
# Nombre maximum de tentatives de connexion avant verrouillage
MAX_LOGIN_ATTEMPTS=5

# Durée de verrouillage en minutes
ACCOUNT_LOCKOUT_DURATION_MINUTES=30

# Réinitialiser le compteur après X minutes sans tentative
LOGIN_ATTEMPTS_RESET_MINUTES=15

# ================================================================================================
# SÉCURITÉ - POLITIQUE DE MOTS DE PASSE
# ================================================================================================
# Longueur minimale du mot de passe
PASSWORD_MIN_LENGTH=8

# Exigences de complexité (true/false)
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_NUMBER=true
PASSWORD_REQUIRE_SPECIAL=true

# Expiration des mots de passe en jours (0 = pas d'expiration)
PASSWORD_EXPIRY_DAYS=90

# ================================================================================================
# SÉCURITÉ - GESTION DES SESSIONS
# ================================================================================================
# Timeout de session en minutes (0 = désactivé)
SESSION_TIMEOUT_MINUTES=30

# ================================================================================================
# REDIS (OPTIONNEL - pour cache et sessions)
# ================================================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# ================================================================================================
# CORS - ORIGINES AUTORISÉES
# ================================================================================================
# Format: liste séparée par des virgules
# En développement, les localhost sont automatiquement autorisés
ALLOWED_ORIGINS=https://app.crou.ne,https://admin.crou.ne

# ================================================================================================
# AUDIT ET LOGGING
# ================================================================================================
# Activer l'audit des connexions
AUDIT_LOGIN_ENABLED=true

# Activer l'audit des actions sensibles
AUDIT_SENSITIVE_ACTIONS_ENABLED=true

# Durée de rétention des logs d'audit en jours
AUDIT_RETENTION_DAYS=365

# Niveau de log (debug | info | warn | error)
LOG_LEVEL=info

# Chemin du fichier de log
LOG_FILE_PATH=./logs/api.log

# ================================================================================================
# UPLOADS ET FICHIERS
# ================================================================================================
# Taille maximale d'upload en octets (10MB par défaut)
UPLOAD_MAX_SIZE=10485760

# Chemin de stockage des fichiers uploadés
UPLOAD_PATH=./uploads

# ================================================================================================
# EMAIL (OPTIONNEL - pour notifications)
# ================================================================================================
EMAIL_HOST=smtp.example.com
EMAIL_PORT=587
EMAIL_USER=noreply@crou.ne
EMAIL_PASSWORD=votre_mot_de_passe_email
EMAIL_FROM=CROU System <noreply@crou.ne>

# ================================================================================================
# FRONTEND (VITE) - Variables préfixées par VITE_
# ================================================================================================
# Port du serveur de développement frontend
VITE_PORT=3000

# URL de l'API backend
VITE_API_URL=http://localhost:3001

# Version de l'application (affichée dans l'UI)
VITE_APP_VERSION=1.0.0

# Endpoint pour l'envoi des erreurs frontend (monitoring)
VITE_ERROR_LOGGING_ENDPOINT=https://api.crou.ne/client-errors

# ================================================================================================
# SERVICES EXTERNES (OPTIONNEL)
# ================================================================================================
# Clés API pour services externes si nécessaire
# SENTRY_DSN=
# ANALYTICS_ID=
# GOOGLE_MAPS_API_KEY=

# ================================================================================================
# DÉVELOPPEMENT UNIQUEMENT
# ================================================================================================
# Afficher les requêtes SQL en console (true/false)
# TYPEORM_LOGGING=false

# Synchroniser automatiquement le schéma (DANGER en production !)
# TYPEORM_SYNCHRONIZE=false

# ================================================================================================
# NOTES DE SÉCURITÉ
# ================================================================================================
# 1. Générer des secrets forts avec: openssl rand -hex 64
# 2. Ne jamais utiliser les mêmes secrets entre environnements (dev/staging/prod)
# 3. Changer les secrets régulièrement en production
# 4. Ne jamais committer le fichier .env dans Git
# 5. Utiliser des variables d'environnement ou un gestionnaire de secrets en production
# 6. S'assurer que JWT_SECRET et JWT_REFRESH_SECRET sont différents
# 7. Configurer les sauvegardes de base de données régulières
# 8. Limiter les origines CORS en production aux domaines réels
#
# ================================================================================================
# AIDE
# ================================================================================================
# Documentation: voir README.md et docs/ pour plus de détails
# En cas de problème: vérifier les logs dans ./logs/
# Génération de secrets: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
# ================================================================================================
